<?php
/**
 *  ocs-webserver
 *
 *  Copyright 2016 by pling GmbH.
 *
 *    This file is part of ocs-webserver.
 *
 *    This program is free software: you can redistribute it and/or modify
 *    it under the terms of the GNU Affero General Public License as
 *    published by the Free Software Foundation, either version 3 of the
 *    License, or (at your option) any later version.
 *
 *    This program is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *    GNU Affero General Public License for more details.
 *
 *    You should have received a copy of the GNU Affero General Public License
 *    along with this program.  If not, see <http://www.gnu.org/licenses/>.
 **/

  $modelInfo = new Default_Model_Info();
  /**
        $this->comments = $modelInfo->getLatestComments(16);
        $this->users = $modelInfo->getNewActiveMembers(12);
        $this->supporters = $modelInfo->getNewActiveSupporters(12);
        //$this->plingproducts = $modelInfo->getNewActivePlingProduct(9);

        $this->productsThemesGTK = $modelInfo->getLastProductsForHostStores(6);
        $this->productsThemesPlasma = $modelInfo->getLastProductsForHostStores(6);
        $this->productsWindowmanager = $modelInfo->getLastProductsForHostStores(6);
        $this->productsIconsCursors= $modelInfo->getLastProductsForHostStores(6);
        $this->productsScreenshots= $modelInfo->getLastProductsForHostStores(6);
        $this->productsApps = $modelInfo->getLastProductsForHostStores(6);
        $this->productsAddons = $modelInfo->getLastProductsForHostStores(6);
        $this->productsWallpapers = $modelInfo->getLastProductsForHostStores(6);
        $this->countSupporters = $modelInfo->getCountActiveSupporters();



        $topProducts = new Default_View_Helper_FetchTopProductsForStore();
        $this->topProducts = $topProducts->fetchTopProducts();

        $featuredProducts = $modelInfo->getFeaturedProductsForHostStores(100);
        if ($featuredProducts->getTotalItemCount()) {
            $request = Zend_Controller_Front::getInstance()->getRequest();
            $offset = (int)$request->getParam('page');
            $irandom = rand(1,$featuredProducts->getTotalItemCount());
            $featuredProducts->setItemCountPerPage(1);
            $featuredProducts->setCurrentPageNumber($irandom);
            $this->featureProducts = $featuredProducts;
        }

        $helperBuildMemberUrl = new Default_View_Helper_BuildMemberUrl();
        $helperImage = new Default_View_Helper_Image();
        $helpPrintDate = new Default_View_Helper_PrintDate();
   * 
   * 
   */

  $host = $_SERVER['SERVER_NAME'];
  echo "Host: " . $host;
  
  if(strpos ( $host , ".cc" ) > 0) {
    $this->LatestProducts = $modelInfo->getLastProductsForHostStores(6,"98,52,53,48,104,105");
    $this->topGames = $modelInfo->getLastProductsForHostStores(6,"98");
    $this->topApps = $modelInfo->getLastProductsForHostStores(6,"98,52,53,48,104,105");
  } else {
    $this->LatestProducts = $modelInfo->getLastProductsForHostStores(6,"6,234,239,243,244,245,388,391,392,450,481,492");
    $this->topGames = $modelInfo->getLastProductsForHostStores(6,"6");
    $this->topApps = $modelInfo->getLastProductsForHostStores(6,"234,239,243,244,245,388,391,392,450,481,492");  
  }
  
  
?>

<link type="text/css" rel="stylesheet" href="/theme/react/lib/mdl/material.min.css"/>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,500" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="/theme/react/assets/css/style.css"/>

<main id="explore-content"></main>

<script type="text/javascript">

  <?php
    $js_latestProducts = json_encode($this->LatestProducts);
    $js_topGames = json_encode($this->topGames);
    $js_topApps = json_encode($this->topApps);
  ?>

  var products = {
    LatestProducts:<?php echo $js_latestProducts ?>,
    TopGames:<?php echo $js_topGames ?>,
    TopApps:<?php echo $js_topApps ?>
  };

</script>

<script type="text/javascript" src="/theme/react/lib/react/react.js"></script>
<script type="text/javascript" src="/theme/react/lib/react-dom/react-dom.js"></script>
<script type="text/javascript" src="/theme/react/lib/redux/redux.min.js"></script>
<script type="text/javascript" src="/theme/react/lib/redux/react-redux.min.js"></script>

<script type="text/javascript" src="/theme/react/lib/mdl/material.min.js"></script>

<script type="text/javascript" src="/theme/react/lib/timeago/timeago.min.js"></script>

<script type="text/javascript" src="/theme/react/all.js"></script>
