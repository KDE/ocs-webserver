(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{232:function(e,n,t){var a=t(6),r=t(233);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};a(r,i);e.exports=r.locals||{}},233:function(e,n,t){var a=t(7),r=t(8),i=t(1);n=a(!1);var o=r(i);n.push([e.i,"#comics-reader-wrapper {\n  height: 100%;\n  position: relative;\n}\n#comics-reader-wrapper #ajax-loader {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -12px;\n  margin-top: -12px;\n  background-image: url("+o+");\n  background-color: white;\n}\n#comics-reader-wrapper .comic-book-reader {\n  height: 100%;\n  position: relative;\n  padding-bottom: 60px;\n}\n#comics-reader-wrapper .comic-book-reader .bb-bookblock {\n  width: 450px;\n  height: 100%;\n}\n#comics-reader-wrapper .comic-book-reader .bb-bookblock .bb-item img,\n#comics-reader-wrapper .comic-book-reader .bb-bookblock .bb-page img {\n  width: 50%;\n  float: left;\n}\n#comics-reader-wrapper .nav-container {\n  width: 100%;\n  text-align: center;\n  position: absolute;\n  bottom: 0;\n  z-index: 111;\n  height: 58px;\n}\n#comics-reader-wrapper .nav-container nav {\n  width: auto;\n  height: 34px;\n  margin: 0 auto 0;\n  display: table;\n}\n#comics-reader-wrapper .nav-container nav a {\n  display: block;\n  min-width: 30px;\n  height: 30px;\n  text-align: center;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0.35);\n  color: #fff;\n  margin: 2px;\n  float: left;\n  cursor: pointer;\n}\n#comics-reader-wrapper .nav-container nav a .glyphicon {\n  top: 7px;\n}\n#comics-reader-wrapper .nav-container nav a:hover {\n  opacity: 0.6;\n}\n#comics-reader-wrapper .nav-container nav a#bb-nav-counter {\n  line-height: 30px;\n  font-size: 12px;\n}\n#comics-reader-wrapper .nav-container > span.title {\n  display: inline-block;\n  /* min-width: 30px; */\n  height: auto;\n  text-align: center;\n  border-radius: 2px;\n  background: rgba(0, 0, 0, 0.35);\n  color: #fff;\n  margin: 2px;\n  /* float: left; */\n  cursor: pointer;\n  font-size: 12px;\n  padding: 4px;\n}\n",""]),e.exports=n},238:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(3);t(232);function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done)&&(t.push(o.value),!n||t.length!==n);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){var n,t=o(Object(a.useState)(!1),2),c=t[0],l=(t[1],o(Object(a.useState)("single"),2)),s=l[0],p=(l[1],o(Object(a.useState)(Object(i.c)(e.pages,s)),2)),d=p[0],u=(p[1],o(Object(a.useState)(0),2)),m=u[0],b=u[1],g=o(Object(a.useState)(d.length),2),f=g[0],v=(g[1],o(Object(a.useState)("normal"),2)),h=v[0];v[1];function w(n){var t;"first"===n?t=0:"last"===n?t=f:"prev"===n?t=0===m?0:m-1:"next"===n&&(t=m===f?f:m+1),window.comicSwiper.slideTo(t),e.onViewPage(t)}if(r.a.useEffect((function(){!function e(){var n=document.getElementById("bb-bookblock");n?$(document).ready((function(){window.comicSwiper=new Swiper(".comic-book-reader",{speed:400,initialSlide:0,observer:!0,observeParents:!0,preloadImages:!0,updateOnImagesReady:!0,nested:!0,threshold:0,onSlideChangeStart:function(e){b(e.activeIndex)}}),window.comicSwiper.update()})):setTimeout((function(){e()}),500)}()}),[]),c)comicPages=r.a.createElement("img",{src:"../../flatui/img/ajax-loader.gif"});else{var x=d.map((function(e,n){return r.a.createElement("div",{className:"swiper-slide",key:n},r.a.createElement("img",{src:e}))}));n=r.a.createElement("div",{id:"bb-bookblock",className:"swiper-wrapper"},x)}return r.a.createElement("div",{className:"comic-book-reader swiper-container "+h},n,r.a.createElement("div",{className:"nav-container"},r.a.createElement("nav",null,r.a.createElement("a",{id:"bb-nav-counter"},m+1+"/"+f),r.a.createElement("a",{id:"bb-nav-first",onClick:function(){return w("first")}},r.a.createElement("span",{className:"glyphicon glyphicon-step-backward"})),r.a.createElement("a",{id:"bb-nav-prev",onClick:function(){return w("prev")}},r.a.createElement("span",{className:"glyphicon glyphicon-triangle-left"})),r.a.createElement("a",{id:"bb-nav-next",onClick:function(){return w("next")}},r.a.createElement("span",{className:"glyphicon glyphicon-triangle-right"})),r.a.createElement("a",{id:"bb-nav-last",onClick:function(){return w("last")}},r.a.createElement("span",{className:"glyphicon glyphicon-step-forward"})),r.a.createElement("a",{id:"bb-nav-viewmode",onClick:function(){return e.onFullScreenToggle(!0!==e.isFullScreen)}},r.a.createElement("span",{className:"glyphicon glyphicon-fullscreen"}))),r.a.createElement("span",{className:"title"},e.comicsFileName)))}n.default=function(e){var n=o(Object(a.useState)("Loading..."),2),t=(n[0],n[1],o(Object(a.useState)(!1),2)),l=(t[0],t[1]),s=o(Object(a.useState)([]),2),p=s[0],d=s[1],u=o(Object(a.useState)(0),2),m=u[0],b=u[1],g=o(Object(a.useState)(!1),2),f=g[0],v=g[1];r.a.useEffect((function(){var n;e.slideIndex===e.currentSlide&&(l(!0),n=json_server_comics+"/api/files/toc?id="+e.slide.file_id+"&format=json",$.ajax({url:n}).done((function(n){var t=Object(i.d)(n.files,e.slide.file_id);d(t)})))}),[e.slideIndex,e.currentSlide]),r.a.useEffect((function(){m>3&&!1===f&&function(){console.log("report comic book reading"),console.log(e);var n="https://"+window.location.hostname+"/p/"+e.product.project_id+"/startmediaviewajax?collection_id="+e.slide.collection_id+"&file_id="+e.slide.file_id+"&type_id=3";$.ajax({url:n}).done((function(e){console.log(e),v(!0)}))}()}),[m]);var h=r.a.createElement("span",{id:"ajax-loader"});return p.length>0&&(h=r.a.createElement(c,{pages:p,slideIndex:e.slideIndex,comicsFileName:e.slide.title,onFullScreenToggle:e.onFullScreenToggle,isFullScreen:e.isFullScreen,onViewPage:function(e){b(m+1)}})),r.a.createElement("div",{id:"comics-reader-wrapper"},h)}}}]);