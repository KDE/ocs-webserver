var prefix="ocs_",OcsStorage={set:function(e,t){localStorage[e]=JSON.stringify(t)},get:function(e){return localStorage[e]?JSON.parse(localStorage[e]):null}},OcsStats={props:{},a:0,readIp:function(e,t){var a=$.getJSON(e,function(e){OcsStats.props.ipv4=e.ip,OcsStats.saveProps(1)});a.fail(function(){OcsStats.saveProps(1)});var i=$.getJSON(t,function(e){OcsStats.props.ipv6=e.ip,OcsStats.saveProps(2)});i.fail(function(){OcsStats.saveProps(2)})},genId:function(){Fingerprint2.get({},function(e){var t=e.map(function(e){return e.value});OcsStats.props.fp=Fingerprint2.x64hash128(t.join(""),31),OcsStats.saveProps(4)})},saveProps:function(e){OcsStorage.set("ocs",OcsStats.props),OcsStats.a+=e,7==OcsStats.a&&OcsStats.postProps()},postProps:function(){$.post("/l/fp",OcsStats.props)},readStats:function(e,t){window.requestIdleCallback?requestIdleCallback(function(){OcsStats.genId(),OcsStats.readIp(e,t)}):setTimeout(function(){OcsStats.genId(),OcsStats.readIp(e,t)},500)}},newProductPage=function(){return{setup:function(){function e(){var e=$("#pling-it-box").height();$(".scrollable-content").height(e),$(".scrollable-content").jScrollPane({mouseWheelSpeed:30})}function t(){var e=$("#donations-panel").find("#comments").height(),t=$("#donations-panel").find("#supporters").height();e>t&&$("#donations-panel").find("#supporters").height(e)}$(document).ready(function(){e(),t(),$("a[data-toggle=\"tab\"]").on("shown.bs.tab",function(){t()})})}}}(),ImagePreview={hasError:!1,setup:function(){this.initProductPicture(),this.initTitlePicture(),this.initProfilePicture(),this.initProfilePictureBackground()},previewImage:function(e,t){if(e.files&&e.files[0]){var a=new FileReader,i=new Image,o=e.files[0];a.readAsDataURL(e.files[0]),a.onload=function(a){var r=$("#"+t);i.src=a.target.result,i.onload=function(){var i=this.width,l=this.height,d=o.type,t=o.name,n=~~(o.size/1024);ImagePreview.hasError=!1,r.parent().parent().find("div.bg-danger").remove(),(2e3<i||20>i||2e3<l||20>l)&&(r.parent().parent().append("<div class=\"bg-danger\">Wrong image dimensions</div>"),$($(e).closest("form")[0]).trigger("reset"),ImagePreview.hasError=!0),2e3<n&&(r.parent().parent().append("<div class=\"bg-danger\">File too large</div>"),$($(e).closest("form")[0]).trigger("reset"),ImagePreview.hasError=!0);var s=/(jpg|jpeg|png|gif)$/i;s.exec(d)||(r.parent().parent().append("<div class=\"bg-danger\">Invalid file type: "+o.type+"</div>"),$($(e).closest("form")[0]).trigger("reset"),ImagePreview.hasError=!0),!1==ImagePreview.hasError&&(ImagePreview.hasError=!1,r.attr("src",a.target.result),r.show())},i.onerror=function(){r.parent().parent().find("div.bg-danger").remove(),r.parent().parent().append("<div class=\"bg-danger\">Invalid file type: "+o.type+"</div>")},"product-picture-preview"==t?$("button#add-product-picture").text("CHANGE LOGO"):"title-picture-preview"==t?$("button#add-title-picture").text("CHANGE BANNER"):"profile-picture-preview"==t?($("button#add-profile-picture").text("CHANGE PICTURE"),$("input#profile_img_src").val("local")):"profile-picture-bg-preview"==t&&$("button#add-profile-picture-background").text("CHANGE PICTURE")}}},previewImageMember:function(e,t){if(e.files&&e.files[0]){var a=new FileReader,i=new Image,o=e.files[0];a.readAsDataURL(e.files[0]),a.onload=function(e){var a=$("#"+t);i.src=e.target.result,i.onload=function(){ImagePreview.hasError=!1,a.parent().find(".image-error").remove(),!1==ImagePreview.hasError&&(a.attr("src",e.target.result),a.show())},i.onerror=function(){a.parent().append("<div class=\"image-error\">Invalid file type</div>")},"profile-picture-background-preview"==t&&$("button#add-profile-picture-background").text("CHANGE PICTURE")}}},readImage:function(e){var t=new FileReader,a=new Image;t.readAsDataURL(e),t.onload=function(t){a.src=t.target.result,a.onload=function(){var a=this.width,i=this.height,o=e.type,t=e.name,r=~~(e.size/1024)+"KB";$("#uploadPreview").append("<img src=\""+this.src+"\"> "+a+"x"+i+" "+r+" "+o+" "+t+"<br>")},a.onerror=function(){alert("Invalid file type: "+e.type)}}},initProductPicture:function(){if(0!=$("#image_small").length&&0!=$("#image_small").attr("value").length){var e=$("#image_small").data("target");$(e).attr("src","https://cn.opendesktop.org/cache/200x200-2/img/"+$("#image_small").attr("value")),$(e).show(),$("button#add-product-picture").text("CHANGE LOGO")}},initTitlePicture:function(){if(0!=$("#image_big").length&&0!=$("#image_big").attr("value").length){var e=$("#image_big").data("target");$(e).attr("src","https://cn.opendesktop.org/cache/200x200-2/img/"+$("#image_big").attr("value")),$(e).show(),$("button#add-title-picture").text("CHANGE BANNER")}},initProfilePicture:function(){if(0!=$("#profile_image_url").length&&0!=$("#profile_image_url").attr("value").length){var e=$("#profile_image_url").data("target");$(e).attr("src",$("#profile_image_url").attr("value")),$("#profile-picture").attr("src",$("#profile_image_url").attr("value")),$(e).show(),$("button#add-profile-picture").text("CHANGE PICTURE")}},initProfilePictureBackground:function(){if(0!=$("#profile_image_url_bg").length&&0!=$("#profile_image_url_bg").attr("value").length){var e=$("#profile_image_url_bg").data("target");$(e).attr("src",$("#profile_image_url_bg").attr("value")),$("#profile-picture-background-preview").attr("src",$("#profile_image_url_bg").attr("value")),$(e).show(),$("button#add-profile-picture-background").text("CHANGE PICTURE")}}},MenuHover=function(){return{setup:function(){$("body").on("click","a#login-dropdown",function(e){e.stopPropagation(),$(".header-login-container").toggleClass("active")}).on("click",".header-login-container",function(e){e.stopPropagation()}).on("click","a.menu-trigger",function(e){e.stopPropagation();var t="."+$(this).attr("rel");$(t).toggleClass("active")}).on("mouseup",function(e){var t=$("ul.profile-menu"),a=$("li.profile-menu-container a.menu-trigger");a.is(e.target)||!t.is(e.target)&&0===t.has(e.target).length&&t.removeClass("active")}).on("mouseup",function(e){container=$("div.header-login-container"),trigger=$("a#login-dropdown");trigger.is(e.target)||!container.is(e.target)&&0===container.has(e.target).length&&container.removeClass("active")}).click(function(){$(".header-login-container.active").removeClass("active"),$(".profile-menu.active").removeClass("active")})}}}(),ButtonCode=function(){return{setup:function(){$("#button-code-heading").click(function(){$(this).hasClass("button-code-active")?($(this).removeClass("button-code-active"),$(this).parent().find(".button-code").slideUp("fast"),$(this).parent().find(".button-code").css("border-bottom","none"),$(this).find(".icon-expand-code").css("background-image","url(img/icon-expand.png)")):($(this).addClass("button-code-active"),$(this).parent().find(".button-code").css("border-bottom","1px solid #bdc3c7"),$(this).parent().find(".button-code").slideDown("fast"),$(this).find(".icon-expand-code").css("background-image","url(img/icon-contract.png)"))})},setupClipboardCopy:function(e){$(e).on("mouseover",function(){$(this).off("mouseover"),$(this).find("[data-clipboard-target]").each(function(){var e=$($(this).attr("data-clipboard-target"));$(this).zclip({path:"/theme/flatui/js/lib/ZeroClipboard.swf",copy:$.trim($(e).text())})})})}}}(),ProductPage=function(){return{setup:function(){$(".dropdown-toggle").dropdown(),$(".scroll-pane").jScrollPane({mouseWheelSpeed:30,animateScroll:!0}),$(".love-it").on("click",function(){this_img_src=$(this).find("img").attr("src"),$(this).hasClass("no-login")||"/theme/flatui/img/icon-like-color.png"==this_img_src||$(this).prev(".share-it").trigger("click")}),$(".payment-options").find(".options").find("span.option").on("click",function(){var e=$(this).attr("title"),t=$(".payment-options").find("input[type=\"number\"]");t.attr("value",e).val(e),t.focus(),$(".options").find(".selected").removeClass("selected"),$(this).addClass("selected")})},setupPlingButton:function(){$("#pling-amount").on("focus",function(){$("#pling-amount").popover("destroy")}),$("#pling-start").on("click",function(e){return(validateElement=$("#pling-amount"),validateValue=validateElement.val(),""==validateValue||isNaN(parseFloat(validateValue))||!isFinite(validateValue))?(e.preventDefault(),$("#pling-amount").popover({placement:"bottom",html:"true",content:"<button type=\"button\" class=\"close\" onclick=\"$('#pling-amount').popover('destroy')\">\xD7</button><div id=\"popOverBox\">Donation must be a numeric value.</div>"}).popover("show"),!1):(minValue=validateElement.attr("min"),parseFloat(validateValue)<parseFloat(minValue))?(e.preventDefault(),$("#pling-amount").popover({placement:"bottom",html:"true",content:"<button type=\"button\" class=\"close\" onclick=\"$('#pling-amount').popover('destroy')\">\xD7</button><div id=\"popOverBox\">Donation must be equal or greater than "+minValue+".</div>"}).popover("show"),!1):(maxValue=validateElement.attr("max"),parseFloat(validateValue)>parseFloat(maxValue))?(e.preventDefault(),$("#pling-amount").popover({placement:"bottom",html:"true",content:"<button type=\"button\" class=\"close\" onclick=\"$('#pling-amount').popover('destroy')\">\xD7</button><div id=\"popOverBox\">Donation must be smaller or equal than "+maxValue+".</div>"}).popover("show"),!1):void 0})}}}(),SlideShowRender=function(){return{setup:function(){$("#slideshow-container").find("img:first").addClass("active"),$("#slideshow-container").find("#navigation").find("a:first").addClass("active")}}}(),ProductSlideShow=function(){return{setup:function(){$("#slideshow-container").find("#arrows").find("a").on("click",function(){var e=$(this).attr("id"),t=$("#slideshow-container #slides"),a=t.find("img.active"),i=a.attr("rel"),o=$("#slideshow-container").find("#navigation").find("a.active");if("prev"==e){var r=parseInt(i)-parseInt(1),s=$("#slideshow-container").find("img[rel=\""+r+"\"]"),n=$("#slideshow-container").find("#navigation").find("a[rel=\""+r+"\"]");if(1==!s.size())var s=t.find("img:last"),n=$("#slideshow-container").find("#navigation").find("a:last")}else if("next"==e){var l=parseInt(i)+parseInt(1),s=$("#slideshow-container").find("img[rel=\""+l+"\"]"),n=$("#slideshow-container").find("#navigation").find("a[rel=\""+l+"\"]");if(1==!s.size())var s=t.find("img:first"),n=$("#slideshow-container").find("#navigation").find("a:first")}a.removeClass("active"),o.removeClass("active"),s.addClass("active"),n.addClass("active")}),$("#slideshow-container").find("#navigation").find("a").on("click",function(){var e=$(this).attr("rel"),t=$("#slideshow-container").find("img[rel=\""+e+"\"]");$("#slideshow-container").find("img.active").removeClass("active"),t.addClass("active"),$("#slideshow-container").find("#navigation").find("a.active").removeClass("active"),$(this).addClass("active")})}}}(),SlideShow=function(){return{setup:function(){slideShowInterval=setTimeout(function(){var e=$("#slideshow-container").find("img.active"),t=e.attr("rel"),a=parseInt(t)+parseInt(1),i=$("#slideshow-container").find("img[rel=\""+a+"\"]"),o=$("#slideshow-container").find("#navigation").find("a.active");e.removeClass("active"),o.removeClass("active"),1==i.size()?(i.addClass("active"),$("#slideshow-container").find("#navigation").find("a[rel=\""+a+"\"]").addClass("active")):($("#slideshow-container").find("img:first").addClass("active"),$("#slideshow-container").find("#navigation").find("a:first").addClass("active"))},4e3)}}}(),Popuppanel=function(){return{setup:function(){$("body").on("click","a.popuppanel",function(e){if("_blank"===$(this).attr("target"))console.log("dont prevent default");else{e.preventDefault();var t=$(this).attr("href");$.fancybox({hideOnContentClick:!0,autoScale:!0,cyclic:"true",transitionIn:"elastic",transitionOut:"elastic",type:"iframe",scrolling:"auto",helpers:{overlay:{locked:!1}},autoSize:!0,href:t,type:"ajax"})}})}}}(),PlingsRedirect=function(){return{setup:function(){window.location.hash?($link=$(window.location.hash),$link.trigger("click")):document.location.hash&&($link=$(document.location.hash),$link.trigger("click"))}}}(),ShowPopups=function(){return{setup:function(){window.location.hash&&(alert("Hash"),$("a[href=\""+document.location.hash+"\"]").trigger("click")),document.location.hash&&(alert("Hash"),$("a[href=\""+document.location.hash+"\"]").trigger("click"))}}}();$("body").on("mouseenter",".supporter-thumbnail",function(){$(this).popover("show")}),$("body").on("mouseleave",".supporter-thumbnail",function(){$(this).popover("hide")});var Partials=function(){return{setup:function(){$("body").on("click","a.partial",function(e){e.preventDefault();var t=this.href,a=$(this).attr("data-target"),i=$(this).data("toggle"),o=$(this).attr("data-fragment");return $(a).load(t+" "+o,function(e,t,o){if("error"==t)if(401!=o.status)$(a).empty().html("Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.");else if(e){var r=jQuery.parseJSON(e),s=r.login_url;window.location=s?s:"/login"}i&&$(i).modal("show")}),!1})}}}(),Opendownloadfile=function(){return{setup:function(){$("body").on("click","a.opendownloadfile",function(e){e.preventDefault();var t=$(this).attr("data-file_id"),a=$(this).attr("data-file_type"),i=$(this).attr("data-file_name"),o=$(this).attr("data-file_size"),r=$(this).attr("data-project_id"),s=$(this).attr("data-link_type"),n=$(this).attr("data-is-external-link"),l=$(this).attr("data-has_torrent"),d=null,p="450";return"true"==n&&(d=$(this).attr("data-external_link"),p="500"),$.fancybox({hideOnContentClick:!0,autoScale:!1,scrolling:"no",cyclic:"true",transitionIn:"elastic",transitionOut:"elastic",type:"iframe",width:"600",height:p,iframe:{scrolling:"no"},fitToView:!1,autoSize:!1,id:"opendownloadfilepopup",helpers:{overlay:{locked:!1}},href:"/dl?file_id="+t+"&file_type="+a+"&file_name="+i+"&file_size="+o+"&has_torrent="+l+"&project_id="+r+"&link_type="+s+"&is_external="+n+"&external_link="+d}),!1})}}}(),PartialsButton=function(){return{setup:function(){$("body").on("click","Button.partialbutton",function(e){e.preventDefault();var t=$(this).attr("data-href"),a=$(this).attr("data-target"),i=$(this).data("toggle"),o=$(this).attr("data-fragment"),r=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");return $(a).append(r),$(a).load(t+" "+o,function(e,t,o){if("error"==t)if(401!=o.status)$(a).empty().html("Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.");else if(e){var r=jQuery.parseJSON(e),s=r.login_url;window.location=s?s:"/login"}i&&$(i).modal("show")}),!1})}}}(),PartialsButtonHeartDetail=function(){return{setup:function(){$("body").on("click",".partialbuttonfollowproject",function(e){e.preventDefault();var t=$(this).attr("data-href"),a=$(this).attr("data-target"),i=$(this).attr("data-auth"),o=$(this).data("toggle"),r=$(this).attr("data-fragment");if(!i)return void $("#like-product-modal").modal("show");var s=$("#like-product-modal").find("#loginuser").val(),n=$("#like-product-modal").find("#productcreator").val();if(s==n)return $("#like-product-modal").find("#votelabel").text("Project owner not allowed"),$("#like-product-modal").find(".modal-body").empty(),void $("#like-product-modal").modal("show");var l=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"opacity: 0.6; z-index:1000;position: absolute; left:24px;top: 4px;\"></span>");return $(a).prepend(l),$.ajax({url:t,cache:!1}).done(function(e){$(a).find(".spinning").remove(),"error"==e.status?$(a).html(e.msg):"delete"==e.action?($(a).find(".plingtext").html(e.cnt),$(a).find(".plingtext").addClass("heartnumberpurple"),$(a).find(".plingheart").removeClass("heartproject").addClass("heartgrey"),$(a).find(".plingheart").removeClass("fa-heart").addClass("fa-heart-o")):($(a).find(".plingtext").html(e.cnt),$(a).find(".plingtext").removeClass("heartnumberpurple"),$(a).find(".plingheart").removeClass("heartgrey").addClass("heartproject"),$(a).find(".plingheart").removeClass("fa-heart-o").addClass("fa-heart"))}),!1})}}}(),PartialsButtonPlingProject=function(){return{setup:function(){$("#plingbtn").hover(function(){$(this).attr("src","/images/system/pling-btn-hover.png")},function(){$(this).attr("src",$(this).attr("data-src"))}),$("body").on("click",".partialbuttonplingproject",function(e){e.preventDefault();var t=$(this).attr("data-href"),a=$(this).attr("data-target"),i=$(this).attr("data-auth"),o=$(this).attr("data-issupporter"),r=$(this).data("toggle"),s=$(this).attr("data-fragment");if(!i)return void $("#like-product-modal").modal("show");var n=$("#like-product-modal").find("#loginuser").val(),l=$("#like-product-modal").find("#productcreator").val();return n==l?($("#like-product-modal").find("#votelabel").text("Project owner not allowed"),$("#like-product-modal").find(".modal-body").empty(),void $("#like-product-modal").modal("show")):o?($(a).find(".plingnum").html("<span class=\"glyphicon glyphicon-refresh spinning\"/>"),$.ajax({url:t,cache:!1}).done(function(e){"error"==e.status?$(a).html(e.msg):"delete"==e.action?(0==e.cnt?$(a).find(".plingnum").html("Pling me"):$(a).find(".plingnum").html(e.cnt+" Plings"),$(a).find("#plingbtn").attr("src","/images/system/pling-btn-normal.png"),$(a).find("#plingbtn").attr("data-src","/images/system/pling-btn-normal.png")):($(a).find(".plingnum").html(e.cnt+" Plings"),$(a).find("#plingbtn").attr("src","/images/system/pling-btn-active.png"),$(a).find("#plingbtn").attr("data-src","/images/system/pling-btn-active.png"))}),!1):($("#like-product-modal").find("#votelabel").html("<div style=\"width:420px;text-align:center\">To pling a product and help the artist please consider becoming a supporter. Thanks!</br></br><a href=\"/support\">Become a supporter</a></div>"),void $("#like-product-modal").modal("show"))})}}}(),PartialsReview=function(){return{setup:function(){$("body").on("click","a.partialreview",function(e){e.preventDefault();var t=this.href,a=$(this).attr("data-target"),i=$(this).data("toggle"),o=$(this).attr("data-fragment"),r=$("#review-product-modal").find("#loginuser").val(),s=$("#review-product-modal").find("#productcreator").val();if(r==s)return $("#review-product-modal").find("#votelabel").text("Project owner not allowed"),$("#review-product-modal").find(".modal-body").empty(),void $("#review-product-modal").modal("show");var n=$("#review-product-modal").find("#userrate").val();return $(this).hasClass("voteup")?1==n?($("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-success active\" style=\"line-height: 10px;\"><span class=\"fa fa-plus\"></span></a> is given already with comment:"),$("#review-product-modal").find("#commenttext").val($("#review-product-modal").find("#otxt").val()),$("#review-product-modal").find(":submit").text("Remove Rating")):($("#review-product-modal").find("input#voteup").val(1),$("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-success active\" style=\"line-height: 10px;\"><span class=\"fa fa-plus\"></span></a> Add Comment (min. 1 char):"),$("#review-product-modal").find("#commenttext").val("+"),$("#review-product-modal").find(":submit").text("Rate Now"),$("#review-product-modal").find("#commenttext").removeAttr("disabled"),$("#review-product-modal").find(":submit").css("display","block").removeAttr("disabled")):0==n?($("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-danger active\" style=\"line-height: 10px;\"><span class=\"fa fa-minus\"></span></a> is given already with comment: "),$("#review-product-modal").find("#commenttext").val($("#review-product-modal").find("#otxt").val()),$("#review-product-modal").find(":submit").text("Remove Rating")):($("#review-product-modal").find("input#voteup").val(2),$("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-danger active\" style=\"line-height: 10px;\"><span class=\"fa fa-minus\"></span></a> Add Comment (min. 5 char) <span style=\"font-size:10px; display:block\"> Please explain the reason for downvote to help the creator to make it better </span> "),$("#review-product-modal").find("#commenttext").val("-"),$("#review-product-modal").find("#commenttext").removeAttr("disabled"),$("#review-product-modal").find(":submit").removeAttr("disabled").css("display","block"),$("#review-product-modal").find(":submit").text("Rate Now")),$("#review-product-modal").modal("show"),$("#review-product-modal").hasClass("noid")&&setTimeout(function(){$("#review-product-modal").modal("hide")},2e3),!1})}}}(),PartialsReviewDownloadHistory=function(){return{setup:function(){$("body").on("click","button.partialReviewDownloadHistory",function(e){e.preventDefault();var t=$(this).attr("data-userrate");return $("#review-product-modal").find("#commenttext").val($(this).attr("data-comment")),$("#review-product-modal").find("#form_p").val($(this).attr("data-project")),$(this).hasClass("voteup")?1==t?($("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-success active\" style=\"line-height: 10px;\"><span class=\"fa fa-plus\"></span></a> is given already with comment:"),$("#review-product-modal").find(":submit").attr("disabled","disabled").css("display","none"),$("#review-product-modal").find("#commenttext").attr("disabled","disabled")):($("#review-product-modal").find("input#voteup").val(1),$("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-success active\" style=\"line-height: 10px;\"><span class=\"fa fa-plus\"></span></a> Add Comment (min. 1 char):"),$("#review-product-modal").find("#commenttext").val("+"),$("#review-product-modal").find("#commenttext").removeAttr("disabled"),$("#review-product-modal").find(":submit").css("display","block").removeAttr("disabled")):0==t?($("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-danger active\" style=\"line-height: 10px;\"><span class=\"fa fa-minus\"></span></a> is given already with comment: "),$("#review-product-modal").find("#commenttext").attr("disabled","disabled"),$("#review-product-modal").find(":submit").attr("disabled","disabled").css("display","none")):($("#review-product-modal").find("input#voteup").val(2),$("#review-product-modal").find("#votelabel").empty().append("<a class=\"btn btn-danger active\" style=\"line-height: 10px;\"><span class=\"fa fa-minus\"></span></a> Add Comment (min. 5 chars): "),$("#review-product-modal").find("#commenttext").val("-"),$("#review-product-modal").find("#commenttext").removeAttr("disabled"),$("#review-product-modal").find(":submit").removeAttr("disabled").css("display","block")),$("#review-product-modal").modal("show"),$("#review-product-modal").hasClass("noid")&&setTimeout(function(){$("#review-product-modal").modal("hide")},2e3),!1})}}}(),CreateScoreRatingPopup=function(){return{setup:function(){var e,t=0;$("select.rating-select").focus(function(){e=$(this),t=$(this).val()}).change(function(){var e=$(this).find("option:selected"),t=e.val(),a=e.text(),i=$(this).attr("data-userrate"),o=$(this).attr("data-comment"),r=$(this).attr("data-creator"),s=$("#score-product-modal").find("#loginuser").val();return s?s==r?($("#score-product-modal").find("#votelabel").text("Project owner not allowed"),$("#score-product-modal").find(".modal-body").empty(),$("#score-product-modal").find("#modal-btn-onsubmit").remove(),void $("#score-product-modal").modal("show")):void(-1==t?$("#score-product-modal").find("#votelabel").empty().append("Remove Rating "):5>=t?($("#score-product-modal").find("#votelabel").empty().append("Add a review to your rating \""+a+"\" (min. 5 chars) <span style=\"font-size:10px; display:block\"> Please explain the reason for downvote to help the creator to make it better </span> "),$("#score-product-modal").find("#voteup").val(2)):($("#score-product-modal").find("#votelabel").empty().append("Add a review to your rating \""+a+"\" (min. 1 char):"),$("#score-product-modal").find("#voteup").val(1)),$("#score-product-modal").find("#form_p").val($(this).attr("data-project")),$("#score-product-modal").find(":submit").css("display","block").removeAttr("disabled"),$("#score-product-modal").find("#commenttext").removeAttr("disabled"),1<=t&&3>=t?$("#score-product-modal").find("#commenttext").val(""):$("#score-product-modal").find("#commenttext").val(a),$("#score-product-modal").find("#userscorevalue").val(t),"-1"==t?$("#score-product-modal").find(":submit").text("Remove Rating"):$("#score-product-modal").find(":submit").text("Rate Now"),$("#score-product-modal").modal("show")):void $("#score-product-modal").modal("show")}),$("#modal-btn-cancel").on("click",function(){$(e).find("option[value="+t+"]").prop("selected",!0),$("#score-product-modal").modal("hide")});var a=!1;$("#modal-btn-onsubmit").on("click",function(){a=!0}),$("#score-product-modal").on("hidden.bs.modal",function(){a||$(e).find("option[value="+t+"]").prop("selected",!0)})}}}(),PartialForms=function(){return{setup:function(){$("body").on("submit","form.partial",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).find(":submit").attr("disabled","disabled"),$(this).find(":submit").css("white-space","normal");var t=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");$(this).find(":submit").append(t);var a=$(this).attr("data-target"),i=$(this).attr("data-trigger");return console.log(this),jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,error:function(){return $(a).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>"),!1},success:function(e){return $(a).empty().html(e),$(a).find(i).trigger("click"),!1}}),!1})}}}(),PartialJsonClone=function(){return{setup:function(){$("body").on("submit","form.partialjsonclone",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).attr("data-target"),a=$(this).attr("data-trigger"),i=$(this).attr("data-projectid");return jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,dataType:"json",error:function(){$(t).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){$("form#product-report-clone").find("#clonePId").val(""),$("form#product-report-clone").find("#report-text").val(""),$("#report-product-clone-"+i).modal("hide");var t=$("#generic-dialog");t.find(".modal-header-text").empty(),t.find(".modal-body").empty().append(e.message),setTimeout(function(){t.modal("show")},900)}}),!1})}}}(),PartialJson=function(){return{setup:function(){$("body").on("submit","form.partialjson",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).attr("data-target"),a=$(this).attr("data-trigger");return jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,dataType:"json",error:function(){$(t).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){return e.redirect?void(window.location=e.redirect):void(t&&$(t).empty().html(e.message),a&&$(t).find(a).trigger("click"))}}),!1})}}}(),PartialJsonFraud=function(){return{setup:function(){$("body").on("submit","form.partialjsonfraud",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).attr("data-target"),a=$(this).attr("data-trigger"),i=$("form.partialjsonfraud").find("#report-text").val();return 5>i.length?($("form.partialjsonfraud").find("p.warning").remove(),$("form.partialjsonfraud").find("#report-text").parent().append("<p class=\"warning\" style=\"color:red\">at least 5 chars</p>"),!1):(jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,dataType:"json",error:function(){$(t).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){return e.redirect?void(window.location=e.redirect):void(t&&$(t).empty().html(e.message),a&&$(t).find(a).trigger("click"))}}),!1)})}}}(),PartialPayPal=function(){return{setup:function(){this.initPayPalForm(),this.initPayPalFee()},initPayPalForm:function(){$("body").on("submit","form.partialpaypal",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).attr("data-target"),a=$(this).attr("data-trigger");return jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,error:function(e){$("#modal-dialog").modal("hide");var t=$("<div class=\"msg-box modal\" id=\"msg-box\"></div>");t.html($(e.responseText).filter(".page-container").children()),t.append("<div class=\"modal-footer\"><a href=\"#\" class=\"btn\" data-dismiss=\"modal\">Close</a></div>"),setTimeout(function(){t.modal("show")},900)},success:function(e){$(t).empty().html(e),$(t).find(a).trigger("click"),$("#modal-dialog").modal("hide")}}),!1})},initPayPalFee:function(){$("body").on("change","#amount_plings",function(){PartialPayPal.changeFee()})},changeFee:function(){var t=document.getElementById("amount_plings"),e=parseFloat(t.value),a=this.round(.05*e,2),i=.03*(a+e+.3)+.3;i=this.round(i,2);var o=e+a+i;document.getElementById("pling_fee").value=this.round(a,2).toFixed(2),document.getElementById("paypal_fee").value=this.round(i,2).toFixed(2),document.getElementById("sum").value=this.round(o,2)},round:function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}}}(),PartialCommentReviewForm=function(){return{setup:function(){this.initForm()},initForm:function(){$("body").on("submit","form.product-add-comment-review",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$.trim($("#commenttext").val()),a=$("#voteup").val();if(2==a&&5>t.length)return void(0==$("#review-product-modal").find("#votelabel").find(".warning").length&&$("#review-product-modal").find("#votelabel").append("</br><span class='warning' style='color:red'> Please give a comment, thanks!</span>"));if(1>t.length)return void(0==$("#review-product-modal").find("#votelabel").find(".warning").length&&$("#review-product-modal").find("#votelabel").append("</br><span class='warning' style='color:red'> Please give a comment, thanks!</span>"));$(this).find(":submit").attr("disabled","disabled"),$(this).find(":submit").css("white-space","normal");var i=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");return $(this).find(":submit").append(i),jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,error:function(){$("#review-product-modal").modal("hide");var e=$("#generic-dialog");e.modal("hide"),e.find(".modal-header-text").empty().append("Please try later."),e.find(".modal-body").empty().append("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>"),setTimeout(function(){e.modal("show")},900)},success:function(){$("#review-product-modal").modal("hide"),location.reload()}}),!1})}}}(),PartialCommentReviewFormNew=function(){return{setup:function(){this.initForm()},initForm:function(){$("body").on("submit","form.product-add-comment-review-new",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$.trim($("#score-product-modal").find("#commenttext").val()),a=$("#score-product-modal").find("#voteup").val();if(2==a&&5>t.length)return void(0==$("#score-product-modal").find("#votelabel").find(".warning").length&&$("#score-product-modal").find("#votelabel").append("</br><span class='warning' style='color:red'> Please give a comment, thanks!</span>"));if(1>t.length)return void(0==$("#score-product-modal").find("#votelabel").find(".warning").length&&$("#score-product-modal").find("#votelabel").append("</br><span class='warning' style='color:red'> Please give a comment, thanks!</span>"));$(this).find(":submit").attr("disabled","disabled"),$(this).find(":submit").css("white-space","normal");var i=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");return $(this).find(":submit").append(i),jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,error:function(){$("#score-product-modal").modal("hide");var e=$("#generic-dialog");e.modal("hide"),e.find(".modal-header-text").empty().append("Please try later."),e.find(".modal-body").empty().append("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>"),setTimeout(function(){e.modal("show")},900)},success:function(){$("#score-product-modal").modal("hide"),location.reload()}}),!1})}}}(),PartialFormsAjax=function(){return{setup:function(){var t=$("form.partialajax"),a=t.attr("data-target"),i=t.attr("data-trigger");$(t).find(":submit").on("click",function(a){a.preventDefault(),$(t).find(":submit").attr("disabled","disabled"),$(t).find(":submit").css("white-space","normal");var e=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");$(t).find(":submit").append(e),$(t).submit()}),t.ajaxForm({error:function(){$(a).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){$(a).empty().html(e),$(a).find(i).trigger("click")}})}}}(),AjaxFormWithProgress=function(){return{setup:function(e){var t=$(e),a=t.attr("data-target"),i=t.attr("data-trigger"),o=t.find(".progress-bar"),r=t.find(".progress-percent");$(t).find(":submit").on("click",function(a){a.preventDefault(),$(t).find(":submit").attr("disabled","disabled"),$(t).find(":submit").css("white-space","normal");var e=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");$(t).find(":submit").append(e),$(t).submit()}),t.ajaxForm({beforeSend:function(){o.parent().removeClass("hidden"),o.width("0%"),r.html("0%")},uploadProgress:function(e,t,a,i){var s=i+"%";o.width(s),r.html(s)},error:function(){$(a).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){o.width("100%"),r.html("100%"),$(a).empty().html(e),$(a).find(i).trigger("click")}})}}}(),PartialFormsAjaxMemberBg=function(){return{setup:function(){var t=$("form.partialajaxbg"),a=t.attr("data-target"),i=t.attr("data-trigger");$(t).find(":submit").on("click",function(a){a.preventDefault(),$(t).find(":submit").attr("disabled","disabled"),$(t).find(":submit").css("white-space","normal");var e=$("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>");$(t).find(":submit").append(e),$(t).submit()}),t.ajaxForm({error:function(){$(a).empty().html("<span class='error'>Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.</span>")},success:function(e){$(a).empty().html(e),$(a).find(i).trigger("click")}})}}}(),AjaxForm=function(){return{setup:function(e,t){var a=$(t);$("body").on("submit",e,function(e){return e.preventDefault(),e.stopImmediatePropagation(),$(this).find("button").attr("disabled","disabled"),$(this).find(".glyphicon.glyphicon-send").removeClass("glyphicon-send").addClass("glyphicon-refresh spinning"),jQuery.ajax({data:$(this).serialize(),url:this.action,type:this.method,dataType:"json",error:function(e){var t=JSON&&JSON.parse(e.responseText)||$.parseJSON(e.responseText),a=$("#generic-dialog");a.modal("hide"),a.find(".modal-header-text").empty().append(t.title),a.find(".modal-body").empty().append(t.message),setTimeout(function(){a.modal("show")},900)},success:function(e){"ok"==e.status&&$(a).empty().html(e.data),"error"==e.status&&(""==e.message?alert("Service is temporarily unavailable."):alert(e.message))}}),!1})}}}(),WidgetModalAjax=function(){return{setup:function(){$(".my-product-item").find("a.widget-button").on("click",function(){var e=$(this).attr("rel"),t=e.split("product")[1],a=$(".modal-body#widget-code-"+e);$.ajax({url:"/widget/config/"+t,type:"html",success:function(e){a.prepend(e),angular.bootstrap(a,["widgetApp"])}})})}}}(),LoginContainer=function(){return{update:function(){Date.now||(Date.now=function(){return new Date().getTime()});var e=0|Date.now()/1e3;$("#login_container").load("/authorization/htmllogin?"+e,function(){})}}}(),RssNews=function(){return{setup:function(){$.getJSON("https://blog.opendesktop.org/?json=1&callback=?",function(e){var t="";$.each(e.posts,function(e,a){if(3<=e)return!1;var i=moment(a.date);t+="<div class=\"commentstore\"><a href=\""+a.url+"\"><span class=\"title\">"+a.title+"</span></a><div class=\"newsrow\"><span class=\"date\">"+i.format("MMM DD YYYY")+"</span><span class=\"newscomments\">"+a.comments.length+" Comment"+(1<a.comments.length?"s":"")+"</span></div></div>"}),$("#rss-feeds").html(t)})}}}(),BlogJson=function(){return{setup:function(){$.ajax("/json/forum").then(function(e){var t=e.topic_list.topics,a="",o=3;t.sort(function(e,t){return new Date(t.last_posted_at)-new Date(e.last_posted_at)}),$.each(t,function(e,i){if(!i.pinned){var s=i.timeago,n="Reply",l=i.posts_count-1;n=0==l?"Replies":1==l?"Reply":"Replies",a+="<div class=\"commentstore\"><a href=\"https://forum.opendesktop.org/t/"+i.id+"\"><span class=\"title\">"+i.title+"</span></a><div class=\"newsrow\"><span class=\"date\">"+s+"</span><span class=\"newscomments\">"+l+" "+n+"</span></div></div>",o--}return 0!=o&&void 0}),$("#blogJson").html(a)})}}}(),GitlabNewProjectsJson=function(){return{setup:function(e){$.ajax("/json/gitlabnewprojects").then(function(t){var a="";$.each(t,function(t,i){var o=i.timeago;a+="<div class=\"commentstore\"><div class=\"row\"><div class=\"col-lg-2 col-md-3 col-sm-4 col-xs-4\"><div class=\"text-center\">",a+="<a href=\""+i.web_url+"\"><div class=\"avatar-container\">",a+=i.avatar_url?"<img class=\"avatar project-avatar s40 js-lazy-loaded\" src=\""+i.avatar_url+"\" width=\"40\" height=\"40\">":"<div class=\"avatar project-avatar s40 identicon bg2\">"+i.name.substr(0,1)+"</div>",a+="</div></a></div></div><div class=\"col-lg-9 col-md-6 col-sm-4 col-xs-4\" style=\"padding-left: 25px;\"><a href=\""+i.web_url+"\">"+i.name+"</a></div></div>",a+="<div class=\"row\" style=\"margin-left: 0;margin-right: 0;\"><div class=\"userinfo\"><a href=\""+e+"/"+i.namespace.path+"\" class=\"tooltipuserleft tooltipstered\">",showGitUserAvatar(e,i.namespace.name,i.id),a+="<img id=\"avatar_"+i.namespace.name+"_"+i.id+"\" src=\"\">",a+="<span style=\"display: block\">"+i.namespace.name+"</span></a></div></div>",a+="<div class=\"row \" style=\"margin-left: 0;margin-right: 0;\">",a+="   <span style=\"font-size: smaller;\">"+o+"</span></div></div></div>"}),$("#lastgitprojects").html(a)})}}}();function showGitUserAvatar(e,t,a){$.ajax(e+"/api/v4/users?username="+t).then(function(e){$.each(e,function(e,i){$img=$("#avatar_"+t+"_"+a),$img.attr("src",i.avatar_url)})})}var ProductDetailCarousel=function(){return{setup:function(){$(".carousel-inner img").each(function(){$(this).on("click",function(){$("#product-main-img-container").hasClass("imgfull")?$("#product-main-img-container").prependTo($("#product-main")):$("#product-main-img-container").prependTo($("#product-page-content")),$("#product-main-img-container").toggleClass("imgfull"),$("#product-main-img-container").toggleClass("imgsmall")})})}}}(),AppimagequestionOnClick=function(){return{setup:function(){$("body").on("click","i.appimagequestion",function(){var e=$("#generic-dialog");e.modal("show"),e.find(".modal-header-text").empty().append("AppImage Info"),e.find(".modal-body").empty().append("<div class='info' >For easy appimage use, install appimage launcher :<p><a target='_blank' href='https://www.opendesktop.org/p/1228228'>www.opendesktop.org/p/1228228</a><p>More info: <br/><a target='_blank' href='https://www.linuxuprising.com/2018/04/easily-run-and-integrate-appimage-files.html'>www.linuxuprising.com/2018/04/easily-run-and-integrate-appimage-files.html  </a>  </div>")})}}}(),ProductDetailBtnGetItClick=function(){return{setup:function(e){$("body").on("click","button#project_btn_download",function(){$.fancybox({hideOnContentClick:!0,autoScale:!0,cyclic:"true",transitionIn:"elastic",transitionOut:"elastic",type:"ajax",helpers:{overlay:{locked:!1}},autoSize:!0,href:"/p/"+e+"/ppload"})})}}}(),GhnsExcludedClick=function(){return{setup:function(e){$("body").on("click","#ghns_excluded-this-checkbox",function(t){t.stopPropagation();var a=1,i="",o="";this.checked?(a=1,i="Please specify why this product should be excluded (min 5 chars) :",o=" ghns exclude"):(a=0,i="Please specify why this product should be included (min 5 chars) :",o=" ghns include");var r=$("#generic-dialog");return r.modal("show"),r.find(".modal-header-text").empty().append("GHNS "),r.find(".modal-body").empty().append(i+"<p> <textarea class=\"\" id=\"ghns-excluded-text\" name=\"t\" cols=\"50\" rows=\"3\"></textarea> <p><button id=\"btn-ghns-excluded\" data-projectid="+e+"  data-status = "+a+" class=\"btn-ghns-excluded\">"+o+"</button>"),$("body").on("click","#btn-ghns-excluded",function(){var e=$("#ghns-excluded-text").val();if(5>e.length)return alert("min 5 chars"),!1;var t=$(this).attr("data-projectid"),a=$(this).attr("data-status");$.ajax({url:"/backend/project/doghnsexclude",method:"POST",data:{project_id:t,ghns_excluded:a,msg:e},success:function(){var e=$("#generic-dialog");0==a?(e.find(".modal-body").empty().append("Project is successfully included into GHNS"),$("#ghns_excluded-this-checkbox").prop("checked",!1)):(e.find(".modal-body").empty().append("Project is successfully excluded into GHNS"),$("#ghns_excluded-this-checkbox").prop("checked",!0)),setTimeout(function(){e.modal("hide")},1e3)},error:function(){alert("Service is temporarily unavailable.")}})}),!1})}}}(),AboutMeMyProjectsPaging=function(){return{setup:function(){$(window).scroll(function(){var e=$("footer").offset().top,t=$(window).scrollTop()+$(window).height();if(300>e-t){if(!$("button#btnshowmoreproducts").length)return;let e=$("button#btnshowmoreproducts").attr("data-page");$("button#btnshowmoreproducts").remove(),$url=window.location.href,target=$(".about-me-details").find("li.active").find("a").attr("href"),"#user-original-products"==target&&($url+="showoriginal");let t=$("<div></div>").append("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>").load($url,{projectpage:e},function(e,t,a){if("error"==t)if(401!=a.status)$(target).empty().html("Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.");else if(e){var i=jQuery.parseJSON(e),o=i.login_url;window.location=o?o:"/login"}});$(target).append(t)}})}}}(),AboutMeMyProjectsPagingButton=function(){return{setup:function(){$("body").on("click","button#btnshowmoreproducts",function(){let e=$(this).attr("data-page");$(this).remove(),$url=window.location.href,target=$(".about-me-details").find("li.active").find("a").attr("href"),"#user-original-products"==target&&($url+="showoriginal");let t=$("<div></div>").append("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>").load($url,{projectpage:e},function(e,t,a){if("error"==t)if(401!=a.status)$(target).empty().html("Service is temporarily unavailable. Our engineers are working quickly to resolve this issue. <br/>Find out why you may have encountered this error.");else if(e){var i=jQuery.parseJSON(e),o=i.login_url;window.location=o?o:"/login"}});$(target).append(t)})}}}(),ProductDetailCommentTooltip=function(){return{setup:function(){TooltipUser.setup("tooltipuser","right")}}}();function generateTooltipster(e,t){$(e).each(function(){$(this).tooltipster({side:t,theme:["tooltipster-light","tooltipster-light-customized"],contentCloning:!0,contentAsHTML:!0,interactive:!0,functionBefore:function(e,t){var a=$(t.origin),i=a.attr("data-user");!0!==a.data("loaded")&&$.get("/member/"+i+"/tooltip/",function(t){var i=t.data,o="<div class=\"mytooltip\"><div class=\"header\">"+i.username+" <span class=\"glyphicon glyphicon-map-marker\"></span>"+i.countrycity+"</div><div class=\"statistic\"><div class=\"row\"><span class=\"title\">"+i.cntProjects+"</span> products </div><div class=\"row\"><span class=\"title\">"+i.totalComments+"</span> comments </div><div class=\"row\">Likes <span class=\"title\">"+i.cntLikesGave+"</span>  products </div><div class=\"row\">Got <span class=\"title\">"+i.cntLikesGot+"</span> Likes <i class=\"fa fa-heart myfav\" aria-hidden=\"true\"></i> </div><div class=\"row\">Last time active : "+i.lastactive_at+" </div><div class=\"row\">Member since : "+i.created_at+" </div></div>";o+="</div>",e.content(o),a.data("loaded",!0)})}})})}var TooltipUser=function(){return{setup:function(e,t){$("."+e).tooltipster({side:t,theme:["tooltipster-light","tooltipster-light-customized"],contentCloning:!0,contentAsHTML:!0,interactive:!0,functionBefore:function(e,t){var a=$(t.origin),i=a.attr("data-user");!0!==a.data("loaded")&&$.get("/member/"+i+"/tooltip/",function(t){var i=t.data,o="<div class=\"mytooltip\"><div class=\"header\">"+i.username+" <span class=\"glyphicon glyphicon-map-marker\"></span>"+i.countrycity+"</div><div class=\"statistic\"><div class=\"row\"><span class=\"title\">"+i.cntProjects+"</span> products </div><div class=\"row\"><span class=\"title\">"+i.totalComments+"</span> comments </div><div class=\"row\">Likes <span class=\"title\">"+i.cntLikesGave+"</span>  products </div><div class=\"row\">Got <span class=\"title\">"+i.cntLikesGot+"</span> Likes <i class=\"fa fa-heart myfav\" aria-hidden=\"true\"></i> </div><div class=\"row\">Last time active : "+i.lastactive_at+" </div><div class=\"row\">Member since : "+i.created_at+" </div></div>";o+="</div>",e.content(o),a.data("loaded",!0)})}})}}}();function generateTooltipUserPlings(e,t){$(e).each(function(){$(this).tooltipster({side:t,theme:["tooltipster-light","tooltipster-light-customized"],contentCloning:!0,contentAsHTML:!0,interactive:!0,functionBefore:function(e,t){var a=$(t.origin),i=a.attr("data-user");!0!==a.data("loaded")&&$.get("/plings/tooltip/id/"+i,function(t){var i="<div class=\"tooltipuserplingscontainer\">";$.each(t.data,function(e,t){return!(10<e)&&void(0>t.profile_image_url.indexOf("http")&&(t.profile_image_url="https://cn.opendesktop.org/cache/40x40-2/img/"+t.profile_image_url),0<t.profile_image_url.indexOf(".gif")&&(t.profile_image_url="https://cn.opendesktop.org/img/"+t.profile_image_url),i=i+"<div class=\"user\"><a href=\"/member/"+t.member_id+"\"><img src=\""+t.profile_image_url+"\" /></a><span class=\"caption\">"+t.username+"</span></div>")}),i+="</div>",e.content(i),a.data("loaded",!0)})}})})}var TooltipUserPlings=function(){return{setup:function(e,t){$("."+e).tooltipster({side:t,theme:["tooltipster-light","tooltipster-light-customized"],contentCloning:!0,contentAsHTML:!0,interactive:!0,functionBefore:function(e,t){var a=$(t.origin),i=a.attr("data-user");!0!==a.data("loaded")&&$.get("/plings/tooltip/id/"+i,function(t){var i="<div class=\"tooltipuserplingscontainer\">";$.each(t.data,function(e,t){return!(10<e)&&void(0>t.profile_image_url.indexOf("http")&&(t.profile_image_url="https://cn.opendesktop.org/cache/40x40-2/img/"+t.profile_image_url),0<t.profile_image_url.indexOf(".gif")&&(t.profile_image_url="https://cn.opendesktop.org/img/"+t.profile_image_url),i=i+"<div class=\"user\"><a href=\"/member/"+t.member_id+"\"><img src=\""+t.profile_image_url+"\" /></a><span class=\"caption\">"+t.username+"</span></div>")}),i+="</div>",e.content(i),a.data("loaded",!0)})}})}}}(),AboutMePage=function(){return{setup:function(e){var a=$(document).prop("title");$(document).prop("title",e+"'s Profile "+a)}}}(),InitActiveHashTab=function(){return{setup:function(){var e=document.location.hash;$("a[href=\""+e+"\"]")&&$("a[href=\""+e+"\"]").tab("show")}}}(),AboutmeTab=function(){return{setup:function(){$("body").on("click","a.aboutmetab",function(e){e.preventDefault();var t=$(this).attr("href"),a=$(this).attr("data-href");0==$(t).find(".product").length&&$(t).append("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>").load(a,function(){})})}}}(),CommunityTabToplistMemberScrollPaging=function(){return{setup:function(e,t){$(window).scroll(function(){var a=$("footer").offset().top,i=$(window).scrollTop()+$(window).height();if(300>a-i){if(!$("button#toplistmemberscrollshowmore").length)return;var o=$("button#toplistmemberscrollshowmore").attr("data-page");$("button#toplistmemberscrollshowmore").remove();var r=$("<div class=\"toplistmemberx\"></div>");$(e).find(".product-list").append(r),$(r).load(t+"/nopage/1/page/"+o,function(){generateTooltipster($(r).find(".tooltipuser"),"right")})}})}}}(),CommunityTab=function(){return{setup:function(){$("body").on("click","a.communitytab",function(e){e.preventDefault();var t=$(this).attr("href"),a=$(this).attr("data-href");0==$(t).find(".list").find(".user").length&&$(t).find(".list").append("<span class=\"glyphicon glyphicon-refresh spinning\" style=\"position: relative; left: 0;top: 0px;\"></span>").load(a,function(){generateTooltipster($(t).find(".tooltipuser"),"right"),0<$(t).find(".tooltipuserplings").length&&generateTooltipUserPlings($(t).find(".tooltipuserplings"),"right"),"#toplistMemberPanel"==t&&CommunityTabToplistMemberScrollPaging.setup(t,a);let e=$(t).find(".opendesktopwidgetpager span");e.each(function(){$(this).on("click",function(){$(this).parent().addClass("active").siblings().removeClass("active");var e=a+"/nopage/1/page/"+$(this).html();$(t).find(".product-list").html(""),$(t).find(".product-list").load(e,function(){generateTooltipster($(t).find(".tooltipuser"),"right"),0<$(t).find(".tooltipuserplings").length&&generateTooltipUserPlings($(t).find(".tooltipuserplings"),"right")})})})})});var e=document.location.hash;0<$("a[href=\""+e+"\"]").length?($("a[href=\""+e+"\"]").tab("show"),$("a[href=\""+e+"\"]").trigger("click")):(e="#supportersPanel",$("a[href=\""+e+"\"]").trigger("click")),$("body").on("mouseenter",".product-thumbnail-startpage",function(){$(this).popover("show")}),$("body").on("mouseleave",".product-thumbnail-startpage",function(){$(this).popover("hide")})}}}(),TagingProduct=function(){return{setup:function(){$("input[name=tagsuser]").tagify({whitelist:["good","great"],autocomplete:!0}).on("remove",function(t,e){console.log("removed",e)}).on("add",function(t,e){console.log("added",e)})}}}(),TagingProductSelect2=function(){return{setup:function(){$.fn.select2.amd.require(["select2/selection/search"],function(e){e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(""),this.handleSearch()}},null,!0);var a=$(".taggingSelect2").select2({placeholder:"Add Tags here ...",tags:!0,tokenSeparators:[","," "],minimumInputLength:3,maximumSelectionLength:5,width:"resolve",ajax:{url:"/tag/filter",dataType:"json",type:"GET",delay:500,processResults:function(e){return{results:e.data.tags}}}});a.on("select2:select",function(t){var e=t.params.data,i=$("#tagsuserselect").attr("data-pid"),o=a.parent().find("ul.select2-selection__rendered").find("li.select2-selection__choice").length;if(5<o)return void a.find("option[value='"+e.id+"']").remove();var r=/^[0-9A-Za-z_.-]+$/;r.test(e.text)||(a.find("option[value='"+e.id+"']").remove(),alert("Must be letter or number and can include hyphens")),10<e.text.length&&(a.find("option[value='"+e.id+"']").remove(),alert("Max. length 45 chars"))})}}}(),TagingProductDetail=function(){return{setup:function(){TagingProductDetailSelect2.setup(),$("body").on("click","button.topic-tags-btn",function(){if($(this).toggleClass("Done"),$(".product_category").find(".usertagslabel").remove(),$(".tagsuserselectpanel").toggle(),"Done"==$(this).text()){$(this).text("Manage tags");var e="",t=$("li.select2-selection__choice");$.each(t,function(t,a){e=e+"<a rel=\"nofollow\" href=\"/search/projectSearchText/"+a.title+"/t/"+a.title+"/f/tags\" class=\"topic-tag topic-tag-link usertagslabel\">"+a.title+"</a>"}),$(".product_category").find(".topicslink").html(e)}else $(this).text("Done")})}}}(),TagingProductDetailSelect2=function(){return{setup:function(){$.fn.select2.amd.require(["select2/selection/search"],function(e){e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(""),this.handleSearch()}},null,!0);var e=$("#tagsuserselect").select2({placeholder:"Input tags please...",tags:!0,minimumInputLength:3,closeOnSelect:!0,maximumSelectionLength:5,tokenSeparators:[","," "],ajax:{url:"/tag/filter",dataType:"json",type:"GET",delay:500,processResults:function(e){return{results:e.data.tags}}}});e.on("select2:select",function(t){var a=t.params.data,i=$("#tagsuserselect").attr("data-pid");$.post("/tag/add",{p:i,t:a.id}).done(function(t){"error"==t.status?($("span.topic-tags-saved").css({color:"red"}).html(t.message).show().delay(2e3).fadeOut(),e.find("option[value='"+t.data.tag+"']").last().remove()):$("span.topic-tags-saved").css({color:"green"}).html("<i class=\"fa fa-check\"></i> Saved").show().delay(1e3).fadeOut()})}),e.on("select2:unselect",function(t){var e=t.params.data,a=$("#tagsuserselect").attr("data-pid");$.post("/tag/del",{p:a,t:e.id}).done(function(e){console.log(e),$("span.topic-tags-saved").css({color:"green"}).html("<i class=\"fa fa-trash\"></i>"+e.message).show().delay(1e3).fadeOut()})})}}}(),TagingLoopMyProducts=function(){return{setup:function(){TagingLoopMyProductsSelect2.setup(),$("body").on("click","button.topic-tags-btn",function(){if($(this).toggleClass("Done"),$(this).parent().find(".topicsuser").html(""),$(this).parent().find(".tagsuserselectpanel").toggle(),"Done"==$(this).text()){$(this).text("Manage tags");var e="",t=$(this).parent().find("li.select2-selection__choice");$.each(t,function(t,a){e=e+"<a rel=\"nofollow\" href=\"/search/projectSearchText/"+a.title+"/t/"+a.title+"/f/tags\" class=\"topic-tag topic-tag-link usertagslabel\">"+a.title+"</a>"}),$(this).parent().find(".topicsuser").html(e)}else $(this).text("Done")})}}}(),TagingLoopMyProductsSelect2=function(){return{setup:function(){$.fn.select2.amd.require(["select2/selection/search"],function(e){e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(""),this.handleSearch()}},null,!0);var e=$(".taggingSelect2").select2({placeholder:"Input tags please...",tags:!0,minimumInputLength:3,closeOnSelect:!0,maximumSelectionLength:5,tokenSeparators:[","," "],ajax:{url:"/tag/filter",dataType:"json",type:"GET",delay:500,processResults:function(e){return{results:e.data.tags}}}});e.on("select2:select",function(t){var a=t.params.data,i=$(this).attr("id").replace("tagsuserselect","");$.post("/tag/add",{p:i,t:a.id}).done(function(t){"error"==t.status?($("#topic-tags-saved"+i).css({color:"red"}).html(t.message).show().delay(2e3).fadeOut(),e.find("option[value='"+t.data.tag+"']").last().remove()):"existing"==t.status?$("#topic-tags-saved"+i).css({color:"red"}).html(t.message).show().delay(2e3).fadeOut():$("#topic-tags-saved"+i).css({color:"green"}).html("<i class=\"fa fa-check\"></i> Saved").show().delay(1e3).fadeOut()})}),e.on("select2:unselect",function(t){var e=t.params.data,a=$(this).attr("id").replace("tagsuserselect","");$.post("/tag/del",{p:a,t:e.id}).done(function(e){$("#topic-tags-saved"+a).css({color:"green"}).html("<i class=\"fa fa-trash\"></i>"+e.message).show().delay(1e3).fadeOut()})})}}}(),productRatingToggle=function(){return{setup:function(){$("#showRatingAll").on("click",function(){$("#ratings-panel").find(".spinning").show(),setTimeout(function(){$("#ratings-panel").find(".spinning").hide()},500),$(".btnRateFilter").removeClass("activeRating"),$(this).addClass("activeRating"),$(".productRating-rows").show(),$(".productRating-rows-inactive").show()}),$("#showRatingActive").on("click",function(){$("#ratings-panel").find(".spinning").show(),setTimeout(function(){$("#ratings-panel").find(".spinning").hide()},500),$(".btnRateFilter").removeClass("activeRating"),$(this).addClass("activeRating"),$(".productRating-rows").show(),$(".productRating-rows-inactive").hide()}),$("#showRatingUpvotes").on("click",function(){$("#ratings-panel").find(".spinning").show(),setTimeout(function(){$("#ratings-panel").find(".spinning").hide()},500),$(".btnRateFilter").removeClass("activeRating"),$(this).addClass("activeRating"),$(".productRating-rows").show(),$(".clsDownvotes").hide(),$(".productRating-rows-inactive").hide()}),$("#showRatingDownvotes").on("click",function(){$("#ratings-panel").find(".spinning").show(),setTimeout(function(){$("#ratings-panel").find(".spinning").hide()},500),$(".btnRateFilter").removeClass("activeRating"),$(this).addClass("activeRating"),$(".productRating-rows").show(),$(".productRating-rows-inactive").hide(),$(".clsUpvotes").hide()})}}}(),FilterBrowseOriginalFn=function(){return{setup:function(){$("body").on("click","input#filter_browse_original",function(){var e=$(this).is(":checked"),t=window.location.href;0>t.indexOf("browse")&&(t+="/browse/"),0<t.indexOf("filteroriginal")&&(t=t.substring(0,t.indexOf("filteroriginal"))),window.location.href=e?t+"filteroriginal/1":t+"filteroriginal/0"})}}}(),FilterBrowseTagGroupFn=function(){return{setup:function(){$("body").on("change","select.filter_browse_tag_group",function(){var e=$(this).val(),t=$(this).attr("data_group_id");$.ajax({url:"/explore/savetaggroupfilter?group_id="+t+"&tag_id="+e,cache:!1}).done(function(){var e=window.location.href;window.location.href=e})})}}}();