
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <!--
    Modified from the Debian original for Ubuntu
    Last updated: 2014-03-19
    See: https://launchpad.net/bugs/1288690
  -->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>D3</title>    
    <style type="text/css">
     body{
     	font-family: sans-serif;
     	font-size: 12px;
     }
    </style>
 </head>
  <body>
<div style="width: 65%">
	<div style="display: block; float: right; width: 300px" id="detailContainer">

	</div>
	<div>
	<div id="pie" style="padding:50px; "></div>

	<div id="pie2" style="padding:50px;"></div>

	<div id="pie3" style="padding:50px; "></div>
	</div>
</div>
<script src="//d3js.org/d3.v4.min.js"></script>
<script src="theme/flatui/js/lib/d3pie.min.js"></script>
<script>

  d3.csv("data/payout_201707.csv",function(d) {
   return {
      label:d.MemberId+'['+d.Amount+']',
      value: +d.Amount,
      member:d.MemberId
   }
}, function(data) {
      
      var pie = new d3pie("pie", {
          size: {
            canvasWidth: 590,
            pieOuterRadius: "90%"           
          },
          header: {
              title: {
                text: "Member payout_201707",
                fontSize: 24,
                font: "open sans"
                }
            },
          data: {
            sortOrder: "value-desc",
            smallSegmentGrouping: {
              enabled: true,
              value: 1,
              valueType: "percentage",
              label: "<2%"
            },
            content: data
          },
        callbacks: {
            onClickSegment: function(a) {
              if(!a.data.isGrouped)
              {
                  var url='https://opendesktop.org/member/'+a.data.member;
                  window.open(url,'_blank');
              }else{
                  console.log(a);
                  d3.select('#detailContainer').html('');

                  var dh='<table>';
                   var da = a.data.groupedData;                   
                   dh=dh+'<tr><td>#'+da.length+'</td><td>'+a.data.value+'</td></tr>';
                   da.forEach(function(d, i) {
                        dh=dh+'<tr><td><a target="_blank" href="https://opendesktop.org/member/'+d.member+'">'+d.member+'</a></td><td>'+d.value+'</td></tr>';                      
                    });
                   dh=dh+'</table>';
                  d3.select('#detailContainer').html(dh);
              }              
            }
          }
        });

  });

  d3.csv("data/payout_201706.csv",function(d) {
     return {
        label:d.MemberId+'['+d.Amount+']',
        value: +d.Amount,
        member:d.MemberId
     }
  }, function(data) {
        
        var pie = new d3pie("pie2", {
            size: {
              canvasWidth: 590,
              pieOuterRadius: "90%"           
            },
            header: {
                title: {
                  text: "Member payout_201706",
                  fontSize: 24,
                  font: "open sans"
                  }
              },
            data: {
              sortOrder: "value-desc",
              smallSegmentGrouping: {
                enabled: true,
                value: 1,
                valueType: "percentage",
                label: "<2%"
              },
              content: data
            },
          callbacks: {
              onClickSegment: function(a) {
                if(!a.data.isGrouped)
                {
                    var url='https://opendesktop.org/member/'+a.data.member;
                    window.open(url,'_blank');
                }else{
                    console.log(a);
                    d3.select('#detailContainer').html('');

                    var dh='<table>';
                     var da = a.data.groupedData;                   
                     dh=dh+'<tr><td>#'+da.length+'</td><td>'+a.data.value+'</td></tr>';
                     da.forEach(function(d, i) {
                          dh=dh+'<tr><td><a target="_blank" href="https://opendesktop.org/member/'+d.member+'">'+d.member+'</a></td><td>'+d.value+'</td></tr>';                      
                      });
                     dh=dh+'</table>';
                    d3.select('#detailContainer').html(dh);
                }              
              }
            }
          });

    });

  d3.csv("data/payout_201705.csv",function(d) {
     return {
        label:d.MemberId+'['+d.Amount+']',
        value: +d.Amount,
        member:d.MemberId
     }
  }, function(data) {
        
        var pie = new d3pie("pie3", {
            size: {
              canvasWidth: 590,
              pieOuterRadius: "90%"           
            },
            header: {
                title: {
                  text: "Member payout_201705",
                  fontSize: 24,
                  font: "open sans"
                  }
              },
            data: {
              sortOrder: "value-desc",
              smallSegmentGrouping: {
                enabled: true,
                value: 1,
                valueType: "percentage",
                label: "<2%"
              },
              content: data
            },
          callbacks: {
              onClickSegment: function(a) {
                if(!a.data.isGrouped)
                {
                    var url='https://opendesktop.org/member/'+a.data.member;
                    window.open(url,'_blank');
                }else{
                    console.log(a);
                    d3.select('#detailContainer').html('');

                    var dh='<table>';
                     var da = a.data.groupedData;                   
                     dh=dh+'<tr><td>#'+da.length+'</td><td>'+a.data.value+'</td></tr>';
                     da.forEach(function(d, i) {
                          dh=dh+'<tr><td><a target="_blank" href="https://opendesktop.org/member/'+d.member+'">'+d.member+'</a></td><td>'+d.value+'</td></tr>';                      
                      });
                     dh=dh+'</table>';
                    d3.select('#detailContainer').html(dh);
                }              
              }
            }
          });

    });
</script>
     
<div class="video-react-control-bar video-react-control-bar-auto-hide custom-video-player"><button class="video-react-play-control video-react-control video-react-button video-react-paused" type="button" tabindex="0"><span class="video-react-control-text">Play</span></button><div class="video-react-volume-menu-button-vertical video-react-vol-3 video-react-volume-menu-button video-react-menu-button-popup video-react-control video-react-button video-react-menu-button" role="button" tabindex="0"><div class="video-react-menu"><div class="video-react-menu-content"><div class="video-react-volume-bar video-react-slider-bar video-react-slider-vertical video-react-slider" tabindex="0" role="slider" aria-label="volume level" aria-valuenow="100.00" aria-valuetext="100.00%" aria-valuemin="0" aria-valuemax="100"><div class="video-react-volume-level" style="height: 100%;"><span class="video-react-control-text"></span></div></div></div></div></div><div class="video-react-current-time video-react-time-control video-react-control"><div class="video-react-current-time-display" aria-live="off"><span class="video-react-control-text">Current Time </span>0:28</div></div><div class="video-react-time-control video-react-time-divider" dir="ltr"><div><span>/</span></div></div><div class="video-react-duration video-react-time-control video-react-control"><div class="video-react-duration-display" aria-live="off"><span class="video-react-control-text">Duration Time </span>1:25</div></div><div class="video-react-progress-control video-react-control"><div class="video-react-progress-holder video-react-slider-horizontal video-react-slider" tabindex="0" role="slider" aria-label="video progress bar" aria-valuenow="33.53" aria-valuetext="0:28" aria-valuemin="0" aria-valuemax="100"><div class="video-react-load-progress" style="width: 100%;"><span class="video-react-control-text">Loaded: 0%</span><div style="left: 0%; width: 100%;"></div></div><div class="video-react-mouse-display" data-current-time="0:28" style="left: 500px;"></div><div data-current-time="0:28" class="video-react-play-progress video-react-slider-bar" style="width: 33.53%;"><span class="video-react-control-text">Progress: 33.53%</span></div></div></div><a class="cinema-mode-button" order="8" height="360" width="641" src="http://cc.ppload.com/api/files/download/id/1408640512/s/f80e6c6eef46fffa924ef53ff4baaa68b39b142edb3e8e0bb63c9798b6c8ae6b8b5a855ddd134fa30a050ab85e9836406989998b20fe693874fcffd0fac37d3d/t/1558025604/u/24/lt/filepreview/sample_iPod.m4v" aspectratio="auto" player="[object Object]" actions="[object Object]" manager="[object Object]" store="[object Object]" video="[object HTMLVideoElement]"><span></span></a><button class="video-react-icon-fullscreen video-react-fullscreen-control video-react-control video-react-button video-react-icon" type="button" tabindex="0"><span class="video-react-control-text">Non-Fullscreen</span></button></div>

  </body>
</html>
